# 4. 반복문 for, while

---

## 이전 페이지

[3. 조건문 if, case](3%20%E1%84%8C%E1%85%A9%E1%84%80%E1%85%A5%E1%86%AB%E1%84%86%E1%85%AE%E1%86%AB%20if,%20case%20143b86d83496466cb02347ef8fe7a0af.md)

## 다음 페이지

[5. 연산자](5%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%20d31fa70bf3644ab5b47e38ca45074909.md)

---

반복문은 조건문과 쌍벽을 이룰 정도로 개발에서 많이 사용되는 문법이다. 셸 스크립트 역시 `for`문과 `while`문을 제공하며, `for`문은 그 활용 예가 매우 다양하다.

## 1. `for`문

`for`문은 리스트나 배열과 같이 다수의 값을 이용하여 동일한 작업을 처리할 경우에 주로 사용한다. 셸 스크립트에는 이런 `for`문을 두 가지 방법으로 사용할 수 있도록 제공한다.

### 기본 사용법 1

첫 번째 기본 사용법은 Python의 `for`문 사용법과 같이 `in`을 사용하여 리스트나 배열과 같은 특정 범위의 값들을 하나씩 꺼내어 변수에 저장하고, 리스트나 배열의 해당 값을 모두 사용할 때까지 특정 수행문을 처리하는 방식이다. 셸 스크립트에서는 다음과 같은 기본 사용법 1을 기본 사용법 2보다 더 많이 사용한다.

```bash
for 변수 in [범위(리스트 또는 배열, 묶음 등)]; do
    반복할 수행문
done
```

**예제1) `for`문 기본 사용법 1에 대한 예**

다음 예제는 기본 사용법 1에 대한 예제로 `for`문에 반복할 값의 범위를 숫자로 바로 사용하였다. 가장 기본적인 반복문의 사용법이며, 반복하고자 하는 값을 나열하는 방식이다.

```bash
# 숫자 1, 2, 3을 바로 for에 사용하였음
$ vim for-example1.sh
#!/bin/bash

for num in 1 2 3; do
    echo $num
done
```

```bash
# 1, 2, 3이 순차적으로 출력됨
$ sh for-example1.sh
1
2
3
```

**예제2) 범위를 변수로 사용할 경우**

**예제1)**과 같은 경우에는 반복할 값의 범위를 바로 나열했기 때문에 범위를 수정할 수 없다. 그러나, 이번에 살펴볼 예제는 반복할 값의 범위를 변수에 저장함으로써 변수의 값만 바꾸면 언제든지 범위 값을 변경할 수 있다.

```bash
# 숫자 1, 2, 3을 변수에 저장하고 변수를 for문에 사용하였음
$ vim for-example2.sh
#!/bin/bash

numbers="1 2 3"

for num in $numbers; do
    echo $num
done
```

```bash
# 예제1과 같이 1, 2, 3을 순차적으로 출력함
$ sh for-example2.sh
1
2
3
```

**예제3) 범위를 디렉터리로 사용할 경우**

셸 스크립트에는 숫자나 문자열 이외에 디렉터리나 파일과 같은 객체를 범위로 사용할 수 있다. 다음 예제는 홈 디렉터리를 나타내는 환경변수를 사용하여 홈 디렉터리 내의 디렉터리 및 파일 목록을 범위로 사용한 예이다.

```bash
# 환경변수를 사용하여 디렉터리 경로를 for문에 사용하였음
$ vim for-example3.sh
#!/bin/bash

for file in $HOME/*; do
    echo $file
done
```

```bash
# 홈 디렉터리 내의 디렉터리 및 파일 목록이 출력됨
$ sh for-example3.sh
/Users/SAEMC/Applications
/Users/SAEMC/Desktop
/Users/SAEMC/Documents
/Users/SAEMC/Downloads
/Users/SAEMC/Library
/Users/SAEMC/Movies
/Users/SAEMC/Music
/Users/SAEMC/Pictures
/Users/SAEMC/Public
```

**예제4) 범위를 `{}`(중괄호)로 사용할 경우**

반복문의 범위값을 사용할 때 연속된 숫자를 나열할 경우가 있다. 이런 경우에는 `{}`(중괄호)를 사용하여 초기값과 마지막값을 입력하고 중간에 생략한다는 의미의 `..`을 이용하면 모든 숫자를 나열하지 않아도 되므로 좀 더 효율적인 반복문을 사용할 수 있다. 예제에서는 `1`부터 `5`까지의 모든 숫자를 전부 나열하지 않고, `{}`를 사용하여 범위를 좀 더 간결하게 표현하였다.

```bash
# {}를 사용하면 범위에 해당하는 모든 숫자를 나열하지 않고 생략할 수 있음
$ vim for-example4.sh
#!/bin/bash

for num in {1..5}; do
    echo $num
done
```

```bash
# 범위에서 숫자가 생력되었지만, 1부터 5까지 순차적으로 출력됨
$ sh for-example4.sh
1
2
3
4
5
```

`{}`를 사용할 경우 증가값이 `1`이 아니라 그 이상일 경우 다음 예제와 같이 `{초기값..최종값..증가값}`으로 표현할 수 있다. 다음 예제는 `1`부터 `10`까지의 숫자를 출력하되 `2`씩 증가한 값을 출력하는 예제로 `1`에서 `10` 사이의 해당하는 홀수들이 출력된다.

```bash
# 범위를 숫자로 사용할 경우 특정 값으로 증감 표현도 가능
$ vim for-example5.sh
#!/bin/bash

for num in {1..10..2}; do
    echo $num
done
```

```bash
# 1부터 2씩 증가하여 10이 될 때까지 홀수들이 출력됨
$ sh for-example5.sh
1
3
5
7
9
```

**예제5) 범위를 배열로 사용할 경우**

범위를 배열로 사용할 경우에는 배열 선언 시 값과 값 사이에 `,`(쉼표)를 사용해서는 안 된다. 또한 `for`문에 배열의 모든 아이템을 범위로 사용할 경우에는 `${배열[@]}`을 사용하여 배열의 모든 아이템을 사용한다고 명시해 주어야 한다. 이는 위치 매개변수 `$@`를 사용하면 파라미터로 넘어오는 모든 매개변수를 의미하는 것과 동일한 의미이다.

```bash
# 배열을 사용할 때는 ${배열[@]}로 표현해야 배열의 모든 아이템을 사용할 수 있음
$ vim for-example6.sh
#!/bin/bash

array=("apple" "banana" "pineapple")

for fruit in ${array[@]}; do
    echo $fruit
done
```

```bash
# 배열에 저장된 모든 문자열들이 순차적으로 출력됨
$ sh for-example6.sh
apple
banana
pineapple
```

### 기본 사용법 2

두 번째 사용법은 Java나 C 언어와 같이 초기값이 특정 조건에 해당할 때까지 값을 증가시키면서 특정 수행문을 계속 반복하는 방법이다.

```bash
for ((변수 = 초기값; 조건식; 증가값)); do
    반복할 수행문
done
```

**예제6) `for`문의 기본 사용법 2에 대한 예**

이번에 살펴볼 예제는 `for`문의 기본 사용법 2에 대한 예이다. 기본 사용법 2는 `((초기값; 조건식; 증가값))`으로 범위를 표현하며 C 언어나 Java 문법과 유사하다. 다음 예제는 `0`부터 `1`씩 증가하여 `3`보다 작을 때까지 숫자를 출력하는 예로 `0`, `1`, `2`가 순차적으로 출력된다.

```bash
# 기본 사용법 2를 사용할 경우에는 반드시 ()(소괄호)를 두 쌍으로 사용하여야 함
$ vim for-example7.sh
#!/bin/bash

for ((num = 0; num < 3; num++)); do
    echo $num
done
```

```bash
# 0부터 2까지 순차적으로 출력됨
$ sh for-example7.sh
0
1
2
```

## 2. `while`문

`while`문은 특정 범위를 사용하는 것이 아니라 변수의 값이 특정 조건에 맞을 때까지 계속 반복하는 경우에 주로 사용한다. 따라서, 특정 범위에 해당하는 횟수만큼만 특정 수행을 하는 반복문(예를 들어 `1`부터 `100`까지의 합을 계산하는 반복문)을 개발할 경우에는 잘 맞지 않는다.

### 기본 사용법

`while`문은 조건식을 바로 사용한다. 변수의 값이 특정 조건에 맞을 때까지 계속해서 수행문을 반복한다.

```bash
while [ $변수1 연산자 $변수2 ]; do
    반복할 수행문
done
```

**예제) `while`문에 대한 기본 사용법 예**

다음 예제는 `while`문에 대한 예로 변수 `num`의 값이 `3`보다 작을 때까지 `num`의 값을 출력한다. 만일 여기서 `num=$((num + 1))`과 같은 증가식을 넣어주지 않는다면 이 반복문은 조건에 맞지 않아 무한 루프에 빠질 수 있다. 따라서, `while`문을 사용할 경우에는 무한 루프에 빠지지 않도록 주의해야 한다.

```bash
# 변수 num이 3보다 작은 경우에 num 값을 출력하는 예
$ vim while-example1.sh
#!/bin/bash

num = 0

while [ $num -lt 3 ]; do
    echo $num
    num=$((num + 1)) # 변수가 조건에 맞도록 증가식을 넣어주어야 함
done
```

```bash
# 숫자 0부터 2까지 순차적으로 출력됨
$ sh while-example1.sh
0
1
2
```

---

## 이전 페이지

## 다음 페이지