# 2. sed 스크립트

---

## 이전 페이지

[1. sed 사용법 알아보기](1%20sed%20%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%87%E1%85%A5%E1%86%B8%20%E1%84%8B%E1%85%A1%E1%86%AF%E1%84%8B%E1%85%A1%E1%84%87%E1%85%A9%E1%84%80%E1%85%B5%205cabed8704c14e34a6aac52ff20794db.md)

## 다음 페이지

[3. sed 옵션](3%20sed%20%E1%84%8B%E1%85%A9%E1%86%B8%E1%84%89%E1%85%A7%E1%86%AB%209790a1086b9a4d409d03fd9a4841cf63.md)

---

`sed` 스크립트는 어떤 범위의 어떤 문자열이 포함된 라인을 추출하던지 특정 문자열을 원하는 다른 문자열로 변경할 것인지를 명시하는 일이다. 여기서 어떤 범위는 어드레스$^{addresses}$에 해당하며, 특정 문자열을 추출하거나 변경하는 일은 명령어$^{command}$라고 한다. 어드레스는 옵션처럼 생략될 수도 있으며, 어드레스가 생략되면 `sed`는 대상 파일 전체에서 특정 문자열을 찾고 변경한다. 지금부터 `sed` 스크립트의 핵심인 어드레스와 명령어를 알아보도록 하자.

- 어드레스
- 명령어

## 1. 어드레스

어드레스는 대상 파일에서 어떤 범위에 해당한다. 그리고, 어드레스가 정의되지 않았을 경우에는 대상 파일 전체에서 특정 문자열을 찾거나 명령어를 수행한다. 어드레스는 특정 라인일 수도 있고, 정규 표현식과 같은 패턴일 수도 있다. 또는 특정 라인부터 특정 패턴이 포함된 라인까지이거나 특정 패턴이 포함된 라인부터 명시한 라인 수까지일 수도 있다. 다음은 이런 어드레스 종류를 정리한 것이다.

| 옵션 | 설명 |
| --- | --- |
| number | 명시된 숫자에 해당하는 라인 번호일 경우 다음 명령어를 수행함 |
| number~step | 명시된 숫자에 해당하는 라인부터 명시한 단계만큼 해당 라인을 스킵한 다음 라인일 경우 다음명령어를 수행함 |
| $ | 파일의 마지막 라인일 경우 다음 명령어를 수행함 |
| /regexp/ | 명시한 정규 표현식과 일치하는 라인일 경우 다음 명령어를 수행함 |
| \cregexpc | 명시한 정규 표현식과 일치하는 라인일 경우 다음 명령어를 수행함 |
| 0,addr2 | 1번째 라인부터 addr2가 포함된 라인까지가 범위이며, addr2는 정규 표현식이어야 함 |
| addr1,+N | add1이 포함된 라인부터 +N라인까지가 범위이며, addr1은 정규 표현식이어야 하며, N은 숫자여야 함 |
| addr1,~N | add1이 포함된 라인을 기준으로 N라인까지가 범위이며, addr1은 정규 표현식이어야 하며, N은 숫자여야 함 |

## 2. 명령어

`sed` 명령어에는 어드레스를 필요로 하지 않거나, 숫자나 정규 표현식과 같은 단일 어드레스를 사용할 때 사용할 수 있는 명령어와 어드레스 범위를 허용하는 명령어들이 있다. 어드레스를 필요로 하지 않는 명령어는 라벨, 주석, 블록이 있으며, 단일 어드레스를 사용할 수 있는 명령어와 어드레스 범위를 허용하는 명령어에는 주로 문자열 추가, 삭제, 변경, 파일 저장과 같은 명령어들이 있다. 지금부터 `sed`와 함께 사용할 수 있는 다양한 명령어들을 알아보자.

- 0 or 1 어드레스 명령어(Zero- or One- address commands)
- 어드레스 범위 명령어(Commands which accept address ranges)

### 0 or 1 어드레스 명령어

0 or 1 어드레스 명령어에는 라벨, 주석, 블록과 같이 파일 내용에 아무런 영향을 주지 않는 명령어와 문자열 추가, 삽입, 스크립트 종료, 파일 내용 추가와 같은 명령어들로 어드레스가 필요한 명령어가 있다. 다음은 이런 명령어들을 정리한 것이다.

| 옵션 | 설명 |
| --- | --- |
| :label | 라벨 |
| #comment | 주석 |
| { ... } | 블록 |
| = | 현재 라인 번호 출력 |
| a \text | 문자열 추가 |
| i \text | 문자열 삽입 |
| q | sed 스크립트 실행 종료 |
| Q | sed 스크립트 실행 종료 |
| r 파일명 | 파일 내용 추가 |
| R 파일명 | 파일의 첫 라인 추가 |

### 어드레스 범위 명령어

어드레스 범위는 특정 라인부터 특정 라인까지를 의미하며, 이런 어드레스를 허용하는 명령어들에는 문자열 변경, 삭제, 출력, 라벨 분기와 같은 명령어들이 있다. 다음은 어드레스 범위 명령어$^{Commands\ which\ accept\ address\ ranges}$를 정리한 것이다.

| 옵션 | 설명 |
| --- | --- |
| b label | 라벨을 호출함 |
| c \text | 앞에서 명시된 패턴이 포함된 라인을 text 문자열로 변경 |
| d,
D | 앞에서 명시된 패턴 삭제 |
| h,
H | 패턴 공간을 홀드 공간에 복사/추가 |
| g,
G | 홀드 공간을 패턴 공간에 복사/추가 |
| l | 입된 데이터의 현재 라인 출력 |
| l width | 명시한 너비에 맞게 입력된 데이터의 현재 라인 출력 |
| n,
N | 입력된 데이터의 다음 라인을 복사/추가 |
| p,
P | 현재 패턴 공간 출력 |
| s/regexp/replacement/ | 정규 표현식(regexp)에 해당하는 데이터를 그 다음 오는 데이터(replacement)로 변경함 |
| t label / T label | 앞에서 선언된 명령어를 실행 후 라벨로 분기 |
| w,
W | 명시한 파일에 현재 패턴 공간을 저장함 |
| x | 홀드와 패턴 공간의 콘텐츠를 교환함 |
| y/source/dest/ | 패턴이 포함된 라인의 문자열(source)을 dest 문자열로 변경 |

---

## 이전 페이지

## 다음 페이지