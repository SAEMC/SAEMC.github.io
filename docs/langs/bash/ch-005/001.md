# 1. grep 사용법 알아보기

---

## 이전 페이지

[BASH](../BASH%20f8c8552169a843adb423b9063f9f5685.md)

## 다음 페이지

[2. grep의 다양한 옵션들](2%20grep%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A1%E1%84%8B%E1%85%A3%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%8B%E1%85%A9%E1%86%B8%E1%84%89%E1%85%A7%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%202c79debc5514415780051549e8b1bf91.md)

---

리눅스나 유닉스에서 가장 많이 쓰는 명령어는 특정 디렉터리나 로그, 환경 설정 파일 등에서 특정 문자열을 찾을 수 있는 `grep` 명령어일 것이다. `grep` 명령어는 제공된 파일이나 선행 명령어의 결과에서 입력한 패턴과 일치하는 라인이 있는지 검색하여 해당 라인을 출력한다. 이때 사용되는 패턴은 메타 문자와 문자클래스들이다. 그럼, 지금부터 `grep` 사용법 및 다양한 옵션들을 알아보도록 하자.

`grep`은 여러 사용법과 많은 옵션들이 있다. 옵션과 패턴을 어떻게 적용하느냐에 따라 검색 결과가 달라지기도 한다. 또한 `grep` 외에 `egrep`, `fgrep`, `rgrep` 등이 있지만, 이들은 현재 사용되지 않으며 `grep`의 옵션을 통해 해당 기능이 대체되었다. 그럼 지금부터 `grep` 사용법을 알아보자. 또한 `grep`이 GNU 기반인지 BSD 기반인지에 따라 약간의 차이는 있지만, 사용법은 유사하므로 여기서는 GNU 기반의 `grep` 사용법에 대해 알아본다.

### 기본 사용법 1

`grep`의 가장 기본적인 사용 방법은 다음과 같이 옵션, 패턴, 그리고 패턴을 검색할 파일로 이루어진다.

```bash
grep [옵션] 패턴 [파일]
```

**예제1) `grep` 기본 사용법 1**

예제를 통해 `grep`의 기본 사용법을 알아보자. `grep`을 사용할 때는 옵션, 검색할 문자열의 패턴, 그리고 검색 대상이 되는 파일명이 필요하다. 다음 예제는 `-i` 옵션을 이용하여 `uuid`라는 단어(패턴)를 `/etc/fstab`이라는 파일에서 검색하는 예이다. 옵션 `-i`는 대소문자를 구분하지 않고 패턴을 검색하라는 의미로 패턴인 `uuid`가 소문자이지만 대문자인 `UUID`도 `/etc/fstab` 파일에서 검색된다.

```bash
$ grep -i 'uuid' /etc/fstab
UUID=a41f6e07-60d2-4e1b-b805-9e9371936279 /boot      xfs     defaults        0 0
UUID=BE6C-7180          /boot/efi         vfat    umask=0077,shortname=winnt 0 0
```

### 기본 사용법 2

이번에는 패턴이나 패턴이 저장되어 있는 파일을 이용하여 여러 개의 패턴을 검색하는 방법에 대해 알아보자. `-e` 옵션을 사용하여 여러 개의 패턴을 검색할 수 있으며, `-f` 옵션을 사용하면 패턴이 저장되어 있는 파일을 여러 개 이용해 검색할 수 있다.

```bash
grep [옵션] [-e 패턴 | -f 파일] [파일]
```

**예제1) `grep` 기본 사용법 2 - 패턴을 사용할 경우**

예제를 통해 좀 더 자세하게 살펴보자. `-i` 옵션은 대소문자를 구분하지 않고 패턴을 검색할 때 사용되며, `-e` 옵션은 검색하고자 하는 패턴이 하나 이상일 경우 사용되는 옵션이다. 다음 예제는 오픈스택의 컴퓨트 서비스인 Nova의 환경 설정 파일에서 `[]`(대괄호)로 시작되는 설정 섹션과 `virt_type`으로 시작되는 환경 설정 항목을 검색하는 예제이다. 예제를 통해 `virt_type`이 `[libvirt]` 섹션에 있는 환경 설정 항목임을 알 수 있다.

```bash
# [](대괄호)가 앞뒤에 있는 문자열 검색
$ grep -i -e "^\[[[:alnum:]]*\]" /etc/nova/nova.conf
[DEFAULT]
[api]
[barbican]
...

# [](대괄호)가 앞뒤에 있는 문자열이나 virt_type으로 시작하는 문자열 검색
$ grep -i -e "^\[[[:alnum:]]*\]" -e "^virt_type" /etc/nova/nova.conf
[DEFAULT]
[api]
[barbican]
...
[libvirt]
virt_type = kvm
```

**예제2) `grep` 기본 사용법 2 - 파일을 사용할 경우**

`-f` 옵션을 사용하여 파일에 저장된 패턴을 이용하여 검색할 수 있다. `-f` 옵션은 `-e` 옵션과 동일하게 여러 개의 패턴을 검색할 경우 다음 예제처럼 패턴이 저장된 파일을 이용하여 검색할 수 있다. 자주 사용되거나, 정규 표현식으로 만들어진 복잡한 패턴일 경우 파일로 저장하여 사용하면 다음 검색 시 다시 사용할 수 있어 매우 효율적이다.

```bash
# 패턴이 저장되어 있는 파일을 이용한 검색
$ echo "^\[[[:alnum:]]*\]" > pattern1.txt
$ grep -i -f pattern1.txt /etc/nova/nova.conf
[DEFAULT]
[api]
[barbican]
...

# 패턴이 저장되어 있는 여러 파일의 검색도 가능
$ echo "^virt_type" > pattern2.txt
$ grep -i -f pattern1.txt -f pattern2.txt /etc/nova/nova.conf
[DEFAULT]
[api]
[barbican]
...
[libvirt]
virt_type = kvm
```

### 기본 사용법 3

`grep`의 세 번째 기본 사용법은 명령어 뒤에 `|`(파이프)와 함께 `grep` 명령어를 옵션 및 패턴과 함께 사용하는 방법이다. 이렇게 되면 `|` 앞의 명령어 결과가 `grep`의 검색 대상이 된다.

```bash
명령어 | grep [옵션] [패턴 | -e 패턴]
```

**예제1) `grep` 기본 사용법 3**

예제를 통해 `grep`의 세 번째 기본 사용법을 좀 더 알아보자. 다음 예제는 `cat` 명령어를 이용하여 오픈스택의 컴퓨트 서비스인 `nova.conf` 파일을 표준 출력인 터미널로 보여준다. 이때 `|`와 함께 `grep` 명령어를 이용하면 `cat`을 이용하여 확인한 `/etc/nova/nova.conf` 파일 내용이 `grep`의 검색 대상이 된다. 따라서 `grep`에서 검색하고자 하는 `[Default`로 시작하는 문자열을 `/etc/nova/nova.conf`에서 찾아 해당 라인만 다음과 같이 터미널에 보여준다.

```bash
$ cat /etc/nova/nova.conf | grep -i '^\Default'
[DEFAULT]
```

---

## 이전 페이지

## 다음 페이지